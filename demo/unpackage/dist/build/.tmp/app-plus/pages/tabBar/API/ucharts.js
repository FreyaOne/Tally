(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/API/ucharts"],{"2b9c":function(t,e,a){"use strict";(function(t){a("1b86"),a("921b");i(a("66fd"));var e=i(a("c2bc"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},6474:function(t,e,a){},c0ae:function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=o(a("95b1"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={};function c(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return"start"===t?a-=60:"end"===t&&(a+=2),i=i>9?i:"0"+i,n=n>9?n:"0"+n,"".concat(a,"-").concat(i,"-").concat(n)}var d={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()},h={data:function(){return{array:[{name:"按年"},{name:"按月"},{name:"按日"}],index:0,userinfo:"",cWidth:"",cHeight:"",tips:"",date:c({format:!0}),spend:"1000",surplus:"200",pixelRatio:1,serverData:"",budget:"",editbudget:!0,Line_data:"",startDate:c("start"),endDate:c("end"),itemCount:30,sliderMax:50,toYear:"2019",toMonth:"2019-11",toDay:c({format:!0}),t_year:2019,t_month:"-",t_day:"-"}},onLoad:function(){n=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500)},onReady:function(){var e=this;this.index=0,console.log(i(this.index," at pages/tabBar/API/ucharts.vue:192")),t.getStorage({key:"userinfo",success:function(t){e.userinfo=t.data},fail:function(e){t.showToast({title:"拉取信息失败，请检查网络连接"})}}),this.Line_data=d.year,this.getUserBudget(this.userinfo.userid),this.LineChartYear(this.Line_data),this.ColumnChart(2019)},methods:{edit:function(){this.editbudget=!1},bindPickerChange:function(t){this.index=t.target.value,0==this.index?(this.LineChartYear(),this.t_month="-",this.t_day="-"):1==this.index?(this.ColumnChart(2019,d.month),this.t_month=d.month,this.t_day="-"):(this.ColumnChart(2019,d.month,d.day),this.t_month=d.month,this.t_day=d.day)},bindTimeChange:function(t){this.date=t.target.value;var e=t.target.value,a=e.substring(0,4)-"0",n=e.substring(5,7)-"0",s=e.substring(8,10)-"0";console.log(i(typeof e," at pages/tabBar/API/ucharts.vue:239")),0==this.index?(this.ColumnChart(a),this.t_year=a,this.t_month="-",this.t_day="-",console.log(i("本次选择的是年份："+a," at pages/tabBar/API/ucharts.vue:245"))):1==this.index?(this.ColumnChart(a,n),this.t_year=a,this.t_month=n,this.t_day="-",console.log(i("本次选择的是："+a+" "+n," at pages/tabBar/API/ucharts.vue:251"))):(this.ColumnChart(a,n,s),this.t_year=a,this.t_month=n,this.t_day=s,console.log(i("本次选择的是："+a+" "+n+" "+s," at pages/tabBar/API/ucharts.vue:257")))},save:function(){var e=this.budget;if(e){var a=String(e).indexOf(".")+1,i=String(e).length-a;if(i>2&&0!=a)return void t.showToast({title:"仅保留小数点后两位",icon:"none"})}e-="0",t.request({url:"http://39.107.125.67:8080/budget/update/?userid="+this.userinfo.userid+"&budget="+e,method:"POST",success:function(e){t.showToast({title:"修改成功"})}}),this.editbudget=!0},getUserBudget:function(e){var a=this;t.request({url:"http://39.107.125.67:8080/budget/get/?userid="+e,method:"GET",success:function(t){a.budget=t.data.data[0].budget},fail:function(t){}}),t.request({url:"http://39.107.125.67:8080/bill/category/sum?userid="+this.userinfo.userid+"&year=2019&month="+d.month+"&day=0",method:"GET",success:function(t){var e=t.data.data;a.spend=a.budget-e.series[0].data+e.series[1].data},fail:function(t){}})},changeYear:function(t){this.Line_data=this.Line_data-"0"+t,this.LineChartYear(this.Line_data)},LineChartYear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2019;t.request({url:"http://39.107.125.67:8080/bill/category/each/?userid="+this.userinfo.userid+"&year="+e,success:function(t){var e=t.data.data;n.fill_data("LineA",e)},fail:function(){n.tips="账单拉取失败，请检查网络！"}})},ColumnChart:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.request({url:"http://39.107.125.67:8080/bill/classify/each?userid="+this.userinfo.userid+"&year="+e+"&month="+a+"&day="+i,success:function(t){var e=t.data.data;n.fill_data("Column",e)},fail:function(){n.tips="账单拉取失败，请检查网络！"}})},fill_data:function(t,e){if("LineA"==t){var a={categories:[],series:[]};a.categories=e.categories,a.series=e.series,this.showLineA("canvasLineA",a)}else{var i={categories:[],series:[]};i.categories=e.categories,i.series=e.series,this.showColumn("canvasColumn",i)}},showColumn:function(t,e){u[t]=new s.default({$this:n,canvasId:t,type:"column",padding:[15,15,0,15],legend:{show:!0,padding:5,lineHeight:11,margin:0},fontSize:11,background:"#FFFFFF",pixelRatio:n.pixelRatio,animation:!1,categories:e.categories,series:e.series,xAxis:{disableGrid:!0},yAxis:{format:function(t){return t.toFixed(0)+"元"}},dataLabel:!0,width:n.cWidth*n.pixelRatio,height:n.cHeight*n.pixelRatio,extra:{column:{type:"group",width:n.cWidth*n.pixelRatio*.45/e.categories.length}}})},showLineA:function(t,e){var a;u[t]=new s.default((a={$this:n,canvasId:t,type:"line",fontSize:11,padding:[15,15,0,15],legend:{show:!0,padding:5,lineHeight:11,margin:5},dataLabel:!1,dataPointShape:!1,background:"#FFFFFF",pixelRatio:n.pixelRatio,categories:e.categories,series:e.series,animation:!1,enableScroll:!0,xAxis:{disableGrid:!1,type:"grid",gridType:"dash",itemCount:8,scrollShow:!0,scrollAlign:"left"},yAxis:{gridType:"dash",splitNumber:8,min:10,max:180,format:function(t){return t.toFixed(0)+"元"}},width:n.cWidth*n.pixelRatio,height:n.cHeight*n.pixelRatio},r(a,"dataLabel",!0),r(a,"dataPointShape",!0),r(a,"extra",{lineStyle:"straight"}),a))},touchLineA:function(t){u["canvasLineA"].scrollStart(t)},moveLineA:function(t){u["canvasLineA"].scroll(t)},touchEndLineA:function(t){u["canvasLineA"].scrollEnd(t),u["canvasLineA"].showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},touchIt:function(t,e){u[e].touchLegend(t,{animation:!1}),u[e].showToolTip(t,{format:function(t,e){return"object"===typeof t.data?e+" "+t.name+":"+t.data.value:e+" "+t.name+":"+t.data}})}}};e.default=h}).call(this,a("6e42")["default"],a("0de9")["default"])},c2bc:function(t,e,a){"use strict";a.r(e);var i=a("c5c4"),n=a("e7e2");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("de38");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},c5c4:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},de38:function(t,e,a){"use strict";var i=a("6474"),n=a.n(i);n.a},e7e2:function(t,e,a){"use strict";a.r(e);var i=a("c0ae"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a}},[["2b9c","common/runtime","common/vendor"]]]);